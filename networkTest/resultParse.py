__author__ = 'ziguang'

import pprint
netperfTcpStream="TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.105.60.104 (10.105.60.104) port 0 AF_INET\r\nRecv   Send    Send                          \r\nSocket Socket  Message      Elapsed              \r\nSize   Size    Size     Time     Throughput  \r\nbytes  bytes   bytes    secs.    10^6bits\\/sec  \r\n\r\n  8192   8192   8192    10.00     210.01   \r\n"
pprint.pprint(netperfTcpStream.split('\r\n'))
print netperfTcpStream.split('\r\n')[6].split()[4]

#utf8string= {'http_response_head': '\r\n\\u6b63\\u5728 Ping baidu.com [220.181.57.217] \\u5177\\u6709 32 \\u5b57\\u8282\\u7684\\u6570\\u636e:\r\n\\u6765\\u81ea 220.181.57.217 \\u7684\\u56de\\u590d: \\u5b57\\u8282    =32 \\u65f6\\u95f4=2ms TTL=47\r\n\\u6765\\u81ea 220.181.57.217 \\u7684\\u56de\\u590d: \\u5b57\\u8282=32 \\u65f6\\u95f4=2ms TTL=47\r\n\\u6765\\u81ea 220.181.57.217 \\u7684\\u56de\\u590d: \\u5b57\\u8282    =32 \\u65f6\\u95f4=2ms TTL=47\r\n\\u6765\\u81ea 220.181.57.217 \\u7684\\u56de\\u590d: \\u5b57\\u8282=32 \\u65f6\\u95f4=2ms TTL=47\r\n\r\n220.181.57.217 \\u7684 Ping \\u7edf\\u8ba1\\u4fe1\\u606f:\r\n        \\u6570\\u636e\\u5305: \\u5df2\\u53d1\\u9001 = 4\\uff0c\\u5df2\\u63a5\\u6536 = 4\\uff0c\\u4e22\\u5931 = 0 (0% \\u4e22\\u5931)\\uff0c\r\n\\u5f80\\u8fd4\\u884c\\u7a0b\\u7684\\u4f30\\u8ba1\\u65f6\\u95f    4(\\u4ee5\\u6beb\\u79d2\\u4e3a\\u5355\\u4f4d):\r\n    \\u6700\\u77ed = 2ms\\uff0c\\u6700\\u957f = 2ms\\uff0c\\u5e73\\u5747 = 2ms\r\n', 'start_time': '2015-06-05 16:01:09', 'node_id': '11224365', 'done    _time': '2015-06-05 16:01:18', 'INET_NTOA(client_ip)': '123.59.10.244'}

#pprint.pprint(utf8string['http_response_head'].split('\r\n'))
#pprint.pprint({'http_response_head': '\r\r\nPinging baidu.com [123.125.114.144] with 32 bytes of data:\r\r\n\r\r\nReply from 123.125.114.144: bytes=32 time=2ms TTL=55\r\r\nReply from 123.125.114.144: bytes=32 time=    2ms TTL=55\r\r\nReply from 123.125.114.144: bytes=32 time=2ms TTL=55\r\r\nReply from 123.125.114.144: bytes=32 time=2ms TTL=55\r\r\n\r\r\nPing statistics for 123.125.114.144:\r\r\n    Packets: Sent =     4, Received = 4, Lost = 0 (0% loss),\r\r\nApproximate round trip times in milli-seconds:\r\r\n    Minimum = 2ms, Maximum = 2ms, Average = 2ms\r\r\n', 'start_time': '2015-06-05 16:01:30', 'node_id': '1    1221123', 'done_time': '2015-06-05 16:01:37', 'INET_NTOA(client_ip)': '54.223.186.82'})
#pprint.pprint({'http_response_head': '\r\n\\u6b63\\u5728 Ping baidu.com [220.181.57.217] \\u5177\\u6709 32 \\u5b57\\u8282\\u7684\\u6570\\u636e:\r\n\\u6765\\u81ea 220.181.57.217 \\u7684\\u56de\\u590d: \\u5b57\\u8282    =32 \\u65f6\\u95f4=2ms TTL=47\r\n\\u6765\\u81ea 220.181.57.217 \\u7684\\u56de\\u590d: \\u5b57\\u8282=32 \\u65f6\\u95f4=2ms TTL=47\r\n\\u6765\\u81ea 220.181.57.217 \\u7684\\u56de\\u590d: \\u5b57\\u8282    =32 \\u65f6\\u95f4=2ms TTL=47\r\n\\u6765\\u81ea 220.181.57.217 \\u7684\\u56de\\u590d: \\u5b57\\u8282=32 \\u65f6\\u95f4=2ms TTL=47\r\n\r\n220.181.57.217 \\u7684 Ping \\u7edf\\u8ba1\\u4fe1\\u606f:\r\n        \\u6570\\u636e\\u5305: \\u5df2\\u53d1\\u9001 = 4\\uff0c\\u5df2\\u63a5\\u6536 = 4\\uff0c\\u4e22\\u5931 = 0 (0% \\u4e22\\u5931)\\uff0c\r\n\\u5f80\\u8fd4\\u884c\\u7a0b\\u7684\\u4f30\\u8ba1\\u65f6\\u95f    4(\\u4ee5\\u6beb\\u79d2\\u4e3a\\u5355\\u4f4d):\r\n    \\u6700\\u77ed = 2ms\\uff0c\\u6700\\u957f = 2ms\\uff0c\\u5e73\\u5747 = 2ms\r\n', 'start_time': '2015-06-05 16:01:09', 'node_id': '11224365', 'done    _time': '2015-06-05 16:01:18', 'INET_NTOA(client_ip)': '123.59.10.244'})

netperfUdpStream={"INET_NTOA(client_ip)": "119.29.96.60", "http_response_head": "UDP UNIDIRECTIONAL SEND TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.249.173.173 (10.249.173.173) port 0 AF_INET\r\nSocket  Message      Elapsed      Messages                \r\nSize    Size     Time         Okay Errors   Throughput\r\nbytes   bytes    secs            #      #   10^6bits\\/sec\r\n\r\n  8192    8192   10.00       79779          0     522.84\r\n  8192           10.00       79384            520.25\r\n\r\n", "start_time": "2015-06-09 11:20:10", "done_time": "2015-06-09 11:20:31", "node_id": "11221138", "postParse": "UDP U    NIDIRECTIONAL SEND TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.249.173.173 (10.249.173.173) port 0 AF_INET\r\nSocket  Message  Elapsed      Messages                \r\nSize    Size     Time             Okay Errors   Throughput\r\nbytes   bytes    secs            #      #   10^6bits\\/sec\r\n\r\n  8192    8192   10.00       79779      0     522.84\r\n  8192           10.00       79384            5    20.25\r\n\r\n"}
pprint.pprint(netperfUdpStream['http_response_head'].split('\r\n'))

netperfTcprr={"INET_NTOA(client_ip)": "52.8.8.144", "http_response_head": "TCP REQUEST\\/RESPONSE TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 172.31.3.52 (172.31.3.52) port 0 AF_INET : first burst 0\r\nLocal \\/    Remote\r\nSocket Size   Request  Resp.   Elapsed  Trans.\r\nSend   Recv   Size     Size    Time     Rate         \r\nbytes  Bytes  bytes    bytes   secs.    per sec   \r\n\r\n8192   8192   1        1           10.00    4831.38   \r\n8192   8192  \r\n", "start_time": "2015-06-09 11:53:32", "done_time": "2015-06-09 11:53:50", "node_id": "11221162", "postParse": "TCP REQUEST\\/RESPONSE TEST from 0.0.0.0     (0.0.0.0) port 0 AF_INET to 172.31.3.52 (172.31.3.52) port 0 AF_INET : first burst 0\r\nLocal \\/Remote\r\nSocket Size   Request  Resp.   Elapsed  Trans.\r\nSend   Recv   Size     Size    Time     Rat    e         \r\nbytes  Bytes  bytes    bytes   secs.    per sec   \r\n\r\n8192   8192   1        1       10.00    4831.38   \r\n8192   8192  \r\n"}

pprint.pprint(netperfTcprr['http_response_head'].split('\r\n'))
netperfTcpcc={"INET_NTOA(client_ip)": "123.59.61.63", "http_response_head": "TCP Connect\\/Close TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.10.89.249 (10.10.89.249) port 0 AF_INET\r\nLocal \\/Remote\r\nSocke    t Size   Request  Resp.   Elapsed  Trans.\r\nSend   Recv   Size     Size    Time     Rate         \r\nbytes  Bytes  bytes    bytes   secs.    per sec   \r\n\r\n8192   8192   1        1       10.02        1201.58   \r\n8192   8192  \r\n", "start_time": "2015-06-09 12:11:05", "done_time": "2015-06-09 12:11:27", "node_id": "11222964", "postParse": "1201.58"}
pprint.pprint(netperfTcpcc['http_response_head'].split('\r\n'))

netperfUdprr={"INET_NTOA(client_ip)": "123.59.61.63", "http_response_head": "UDP REQUEST\\/RESPONSE TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.10.89.249 (10.10.89.249) port 0 AF_INET : first burst 0\r\nLocal     \\/Remote\r\nSocket Size   Request  Resp.   Elapsed  Trans.\r\nSend   Recv   Size     Size    Time     Rate         \r\nbytes  Bytes  bytes    bytes   secs.    per sec   \r\n\r\n8192   8192   1            1       9.98     3199.64   \r\n8192   8192  \r\n", "start_time": "2015-06-09 12:16:58", "done_time": "2015-06-09 12:17:18", "node_id": "11222964", "postParse": "UDP REQUEST\\/RESPONSE TEST from 0.0.    0.0 (0.0.0.0) port 0 AF_INET to 10.10.89.249 (10.10.89.249) port 0 AF_INET : first burst 0\r\nLocal \\/Remote\r\nSocket Size   Request  Resp.   Elapsed  Trans.\r\nSend   Recv   Size     Size    Time         Rate         \r\nbytes  Bytes  bytes    bytes   secs.    per sec   \r\n\r\n8192   8192   1        1       9.98     3199.64   \r\n8192   8192  \r\n"}
pprint.pprint(netperfUdprr['http_response_head'].split('\r\n'))

